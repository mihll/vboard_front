<mat-expansion-panel>
  <mat-expansion-panel-header>
    <mat-panel-title>
      Zmień hasło
    </mat-panel-title>
    <mat-panel-description>
      <span class="fill-remaining-space"></span>
      <mat-icon>lock</mat-icon>
    </mat-panel-description>
  </mat-expansion-panel-header>
  <form [formGroup]="userPasswordForm">
    <div>
      <mat-form-field appearance="outline">
        <mat-label>Aktualne hasło</mat-label>
        <input matInput required formControlName="currentPassword" name="currentPassword" type="password" trim="blur">
        <mat-error *ngIf="userPasswordForm.controls['currentPassword'].hasError('required')">
          Podaj swoje aktualne hasło
        </mat-error>
        <mat-error *ngIf="userPasswordForm.controls['currentPassword'].hasError('wrongCurrentPassword')">
          Podaj prawidłowe aktualne hasło
        </mat-error>
      </mat-form-field>
    </div>
    <app-password-input [parentForm]="userPasswordForm"
                        passwordLabel="Nowe hasło"
                        repeatPasswordLabel="Powtórz nowe hasło"
    ></app-password-input>
  </form>
  <mat-action-row>
    <button mat-raised-button color="primary" (click)="updateUserPassword()"
            [disabled]="userPasswordForm?.invalid || loading">
      Zatwierdź
      <mat-icon class="buttonTextIcon" *ngIf="loading">
        <mat-spinner mode="indeterminate" diameter="20"></mat-spinner>
      </mat-icon>
    </button>
  </mat-action-row>
</mat-expansion-panel>
